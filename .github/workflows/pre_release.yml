name: Pre-Release

permissions:
  contents: write

on:
  push:
# pull_request:

jobs:
  prerelease:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Test rippled sync
        run: |
            ls -lah
            echo $(realpath $PWD)
            find . -name "rippled"
            ./rippled --version
            ./rippled --silent --conf ./cfg/devnet/rippled.cfg &> >/dev/null &
            sleep 10
            ./rippled --conf ./cfg/devnet/rippled.cfg server_info | grep "complete_ledgers"

    #   - uses: taiki-e/create-gh-release-action@v1
    #     with:
    #       token: ${{ secrets.GITHUB_TOKEN }}

#   upload-assets:
#     needs: create-release
#     strategy:
#       matrix:
#         include:
#           - target: x86_64-unknown-linux-musl
#             os: ubuntu-latest
#           - target: universal-apple-darwin
#             os: macos-latest
#     runs-on: ${{ matrix.os }}
#     steps:
#       - uses: actions/checkout@v4
#       - uses: taiki-e/upload-rust-binary-action@v1
#         with:
#           # (required) Comma-separated list of binary names (non-extension portion of filename) to build and upload.
#           # Note that glob pattern is not supported yet.
#           bin: xrpl_vl_tool
#           # (optional) Target triple, default is host triple.
#           target: ${{ matrix.target }}
#           # (required) GitHub token for uploading assets to GitHub Releases.
#           token: ${{ secrets.GITHUB_TOKEN }}
